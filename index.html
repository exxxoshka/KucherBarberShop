<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ | –ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∞—è</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .login-container {
            max-width: 450px;
            margin: 0 auto;
        }
        
        .login-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.1);
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo-icon {
            font-size: 3.5rem;
            
            -webkit-background-clip: text;
          
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(106, 17, 203, 0.25);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 12px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.3);
        }
        
        .btn-outline-primary {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .btn-outline-primary:hover {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .guest-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid #e9ecef;
        }
        
        .guest-card {
            background: linear-gradient(135deg, rgba(32, 201, 151, 0.1), rgba(40, 167, 69, 0.1));
            border: 1px solid rgba(32, 201, 151, 0.2);
            border-radius: 15px;
            padding: 20px;
        }
        
        .test-data {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .login-card {
                padding: 30px 20px;
                margin: 20px;
            }
            
            body {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="login-container">
            <div class="login-card">
                <!-- –õ–æ–≥–æ—Ç–∏–ø -->
                <div class="logo">
                    <div class="logo-icon">üíà</div>
                    <h2 class="h3 mb-1">–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∞—è</h2>
                    <p class="text-muted">–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</p>
                </div>
                
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <form id="authForm">
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" id="email" class="form-control" 
                               placeholder="example@mail.ru" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="password" class="form-control" 
                               placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" required minlength="6">
                    </div>
                    
                    <div class="d-grid gap-2 mb-3">
                        <button type="submit" class="btn btn-primary" id="loginBtn">
                            –í–æ–π—Ç–∏
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="registerBtn">
                            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                        </button>
                    </div>
                    
                    <div id="authMessage"></div>
                </form>
                
                <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
                <div class="position-relative my-4">
                    <hr>
                    <div class="position-absolute top-50 start-50 translate-middle bg-white px-3">
                        <span class="text-muted">–∏–ª–∏</span>
                    </div>
                </div>
                
                <!-- –ë–ª–æ–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–¢–ï–ü–ï–†–¨ –ü–û–î –§–û–†–ú–û–ô) -->
                <div class="guest-section">
                    <div class="guest-card">
                        <h5 class="text-center mb-3">üë§ –Ø –∫–ª–∏–µ–Ω—Ç</h5>
                        <p class="text-center text-muted mb-3">
                            –•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∏–∂–∫—É –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                        </p>
                        
                        <div class="d-grid gap-2">
                            <a href="booking.html" class="btn btn-success">
                                üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω
                            </a>
                            <a href="client-view.html" class="btn btn-outline-success">
                                üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏
                            </a>
                        </div>
                    </div>
                    
                    <!-- –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                    <div class="test-data mt-4">
                        <h6 class="mb-2">üéØ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:</h6>
                        <div class="row">
                            <div class="col-md-6 mb-2">
                                <small><strong>–î–ª—è –≤—Ö–æ–¥–∞ –∞–¥–º–∏–Ω–∞:</strong></small><br>
                                <small><code>test@mail.ru</code><br>
                                <code>123456</code></small>
                            </div>
                            <div class="col-md-6">
                                <small><strong>–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–∏—Å–µ–π:</strong></small><br>
                                <small>–¢–µ–ª–µ—Ñ–æ–Ω: <code>+7 (999) 123-45-67</code></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDwXOEGv2GBkeWggfhcBnfKQWnHDVeI890",
            authDomain: "barber-salon-cucher.firebaseapp.com",
            projectId: "barber-salon-cucher",
            storageBucket: "barber-salon-cucher.firebasestorage.app",
            messagingSenderId: "337468108878",
            appId: "1:337468108878:web:0fbcb5f537d891cd2ed31f"
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
    </script>
    
    <!-- JavaScript –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã
            const authForm = document.getElementById('authForm');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const authMessage = document.getElementById('authMessage');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            auth.onAuthStateChanged(user => {
                if (user) {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à–µ–ª - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
                    window.location.href = 'dashboard.html';
                }
            });
            
            // –í—Ö–æ–¥
            loginBtn.addEventListener('click', function(e) {
                e.preventDefault();
                performLogin();
            });
            
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            registerBtn.addEventListener('click', function(e) {
                e.preventDefault();
                performRegistration();
            });
            
            // –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
            authForm.addEventListener('submit', function(e) {
                e.preventDefault();
                performLogin();
            });
            
            // –§—É–Ω–∫—Ü–∏—è –≤—Ö–æ–¥–∞
            function performLogin() {
                const email = emailInput.value.trim();
                const password = passwordInput.value;
                
                if (!validateInputs(email, password)) return;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                loginBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> –í—Ö–æ–¥...';
                loginBtn.disabled = true;
                
                auth.signInWithEmailAndPassword(email, password)
                    .then(() => {
                        showMessage('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ onAuthStateChanged
                    })
                    .catch(error => {
                        showMessage('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message, 'danger');
                        loginBtn.innerHTML = '–í–æ–π—Ç–∏';
                        loginBtn.disabled = false;
                    });
            }
            
            // –§—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            function performRegistration() {
                const email = emailInput.value.trim();
                const password = passwordInput.value;
                
                if (!validateInputs(email, password)) return;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                registerBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...';
                registerBtn.disabled = true;
                
                auth.createUserWithEmailAndPassword(email, password)
                    .then(() => {
                        showMessage('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –í—ã –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É.', 'success');
                        // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                    })
                    .catch(error => {
                        showMessage('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message, 'danger');
                        registerBtn.innerHTML = '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è';
                        registerBtn.disabled = false;
                    });
            }
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            function validateInputs(email, password) {
                if (!email || !password) {
                    showMessage('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'warning');
                    return false;
                }
                
                if (password.length < 6) {
                    showMessage('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'warning');
                    return false;
                }
                
                // –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    showMessage('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email', 'warning');
                    return false;
                }
                
                return true;
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            function showMessage(text, type) {
                authMessage.innerHTML = `
                    <div class="alert alert-${type} alert-dismissible fade show">
                        ${text}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                `;
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    const alert = authMessage.querySelector('.alert');
                    if (alert) {
                        alert.remove();
                    }
                }, 5000);
            }
            
            // –ö–Ω–æ–ø–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            const quickTestBtn = document.createElement('button');
            quickTestBtn.className = 'btn btn-sm btn-outline-info w-100 mt-2';
            quickTestBtn.innerHTML = 'üöÄ –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ';
            quickTestBtn.onclick = function() {
                emailInput.value = 'test@mail.ru';
                passwordInput.value = '123456';
                emailInput.focus();
            };
            
            document.querySelector('.test-data').appendChild(quickTestBtn);
            
            // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ email
            emailInput.focus();
        });
    </script>
</body>
</html>